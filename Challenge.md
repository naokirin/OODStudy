# 不思議のダンジョン2 風来のシレン

![Shiren](http://blog-imgs-27.fc2.com/d/o/u/doughtful/shiren02.gif)

## プレイヤー

### ステータス

* 名前
* HP
* 基本攻撃力
* 剣のつよさ (装備している武器によって決まる)
* 盾のつよさ (装備している盾によって決まる)


### 攻撃する

#### モンスターに攻撃したとき

* そのモンスターにダメージを与える
 * ダメージをいくら与えるかは、ダメージ計算を参照
* 装備していると効果のある武器の効果
 * ゴースト系に2倍のダメージ
 * 1ツ目系に2倍のダメージ
 * ドレイン系に2倍のダメージ
 * ドラゴン系に2倍のダメージ

### 攻撃された

* ダメージを受ける
 * ダメージをいくら受けるかは、ダメージ計算を参照
* 装備していると効果のある盾の効果
 * 攻撃を受けるたびに修正値が-1される
 * ダメージの1/3を跳ね返す (ダメージを2/3に軽減し、1/3を相手に与える)


## 敵

### ステータス

* 名前
* HP
* 攻撃力
* 防御力


### 攻撃する

* プレイヤー、もしくは敵にダメージを与える
 * ダメージをいくら与えるかは、ダメージ計算を参照

### 攻撃される

* ダメージを受ける
 * ダメージをいくら受けるかは、ダメージ計算を参照

### 属性

* 種類
 * ゴースト
 * 1ツ目
 * ドレイン
 * ドラゴン
 * なし


## アイテム

* プレイヤーはアイテムを20個まで所持できる
* 壺に入れたアイテムは所持数に加算されない (壺自体は加算される)
* プレイヤーはアイテムは拾うことができる
* アイテムを拾ったとき、所持しているアイテムが20個未満ならそのアイテムを所持する
* アイテムを拾ったとき、所持しているアイテムが20個なら、所持しているアイテムと交換すると所持することができる
* 拾ったアイテムと交換した、所持していたアイテムは捨てる
* アイテムを拾ったとき、所持しているアイテムが20個で、所持しているアイテムと交換しないなら、そのアイテムを所持することができない
* 所持しているアイテムの順序は拾った順になる
* アイテムは捨てることができる
* プレイヤーは武器、盾を各種1つずつ装備することができる

### アイテムの説明

* アイテムは説明を見ることができる
* 武器、盾で効果のあるものは、効果が説明に表示される
* 効果のない武器、盾は説明がない (空欄で表示される)
* 合成した武器、盾は付いているすべての効果が説明に一覧で表示される


### 武器

* 名前を持つ
* 0以上の整数値の攻撃力を持つ
* -99から99までの整数値の修正値を持つ
* プレイヤーは所持しているアイテムのうち、1つの武器を装備できる
* 武器を装備したプレイヤーの剣のつよさは、装備した武器のつよさになる
* 武器のつよさは攻撃力に修正値を足したものとなる
* 武器のつよさが0未満となった時は、武器のつよさは0とする
* 武器のつよさが255以上となった時は、武器のつよさは255とする

### 盾

* 名前を持つ
* 0以上の整数値の防御力を持つ
* -99から99までの整数値の修正値を持つ
* プレイヤーは所持しているアイテムのうち、1つの盾を装備できる
* 武器を装備したプレイヤーの盾のつよさは、装備した盾のつよさになる
* 盾のつよさは攻撃力に修正値を足したものとなる
* 盾のつよさが0未満となった時は、盾のつよさは0とする
* 盾のつよさが255以上となった時は、盾のつよさは255とする

### 壺

* 容量があり、容量は0から6までの整数値である

#### 保存の壺

* 所持しているアイテム、もしくは拾ったアイテムを、容量の数まで入れることができる
* 壺は入れられない
* 入っているアイテムを取り出して、所持アイテム、もしくは捨てることができる

#### 合成の壺

* 所持しているアイテム、もしくは拾ったアイテムを、容量の数まで入れることができる
* 壺は入れられない
* 入れたアイテムは「アイテム合成」で書かれた仕様にしたがって合成される
* 合成が成功した場合、容量自体が1減る
* 合成の壺からアイテムを取り出すことはできない


## アイテムの効果

### 武器の効果

* ゴースト系に2倍のダメージ
* 1ツ目系に2倍のダメージ
* ドレイン系に2倍のダメージ
* ドラゴン系に2倍のダメージ

### 盾の効果

* 攻撃を受けるたびに修正値が-1される
* ダメージの1/3を跳ね返す (ダメージを2/3に軽減し、1/3を相手に与える)


## アイテム合成

* 合成の壺に入っている最後のアイテムと同種(武器同士、盾同士)のアイテムを入れた場合、合成が成功し、最後のアイテムの修正値に入れたアイテムの修正値を加え、最後のアイテムに入れたアイテムの効果を追加する
* 合成の壺に入っている最後のアイテムと別種のアイテムを入れた場合、合成はされず、壺の中の最後に追加される
* 合成時に同じ効果が重複する場合、その重複する効果は追加されない

## ダメージ計算

* 特に明記していない場合は、計算後に少数点以下を四捨五入した値となる
* 攻撃を受けたプレイヤーや敵は、ダメージの数値分、HPが減る
* HPは0以下にはならない
* m^nはmのn乗の意味で用いている

### プレイヤー

* 攻撃力
 * [基本攻撃力] + (([基本攻撃力] * [剣の強さ] / 16) の小数点以下を四捨五入した値)
 * ただし、255を超えた場合は255となる
* ダメージ
 * [攻撃力] * (15/16)^[敵の防御力]

### 敵

* ダメージ (プレイヤーが受ける場合)
 * [攻撃力] * (15/16)^[プレイヤーの盾の強さ]
* ダメージ (プレイヤー以外)
 * [攻撃力] * (15/16)^[敵の防御力]


## ターンについて

* ターンについての処理はなくてよい

## あえて捨てている機能

基本的に、アイテム、合成に関与しないものや、仕様の簡易化のために削っている

* ターンごとの処理
* 死亡判定
* レベル関連の機能
* プレイヤーのちから
* 空腹
* ダメージの乱数
* 命中率に関する機能
* 敵の特殊能力、特性
* 腕輪、矢、杖、草、種、食料、巻物、肉、ギタン
* 未識別のアイテム
* 投げる、置く
* 罠
* 状態異常
